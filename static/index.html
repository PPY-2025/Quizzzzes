<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Quizzzzes</title>
</head>
<body>
<h1>Quizzzzes</h1>

<!-- ðŸ” Search bar -->
<input type="text" id="search-bar" placeholder="Find quizz..." />

<!-- ðŸ“‹ List of quizzes -->
<ul id="quiz-list"></ul>

<script>
    let allQuizzes = []; // store all quizzes globally

    async function fetchQuizzes() {
        const res = await fetch('http://127.0.0.1:5000/quizzes');
        allQuizzes = await res.json(); // save for filtering
        renderQuizList(allQuizzes);
    }

    function renderQuizList(quizzes) {
        const ul = document.getElementById('quiz-list');
        ul.innerHTML = ''; // clear previous list

        quizzes.forEach(quiz => {
            const li = document.createElement('li');
            const btn = document.createElement('button');
            btn.textContent = quiz.name;
            btn.onclick = () => {
                window.location.href = `quiz.html?quiz_id=${quiz.id}`;
            };
            li.appendChild(btn);
            ul.appendChild(li);
        });
    }

    // ðŸ” Filter quizzes when typing
    document.getElementById('search-bar').addEventListener('input', (e) => {
        const search = e.target.value.toLowerCase();
        const filtered = allQuizzes.filter(quiz =>
            quiz.name.toLowerCase().includes(search)
        );
        renderQuizList(filtered);
    });

    fetchQuizzes();

    // Optional if quiz.html shares this script
    if (window.location.pathname.endsWith('quiz.html')) {
        startQuiz();
    }
</script>
</body>
</html>
